<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- Version: 20251125-1802-three-enhancements -->
    <meta charset="UTF-8">
    <title>PIMS Â∫ìÂ≠òÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="stylesheet" href="css/styles.css?v=20251125-1715">
    <link rel="stylesheet" href="css/settings.css?v=20251125-1715">
    <script src="https://cdn.jsdelivr.net/npm/@ericblade/quagga2/dist/quagga.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>
<body>
    <!-- ÁôªÂΩïÈÅÆÁΩ©Â±Ç -->
    <div id="auth-overlay" class="auth-overlay" style="display: none;">
        <div class="auth-container">
            <div class="auth-logo">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7" rx="1"/>
                    <rect x="14" y="3" width="7" height="7" rx="1"/>
                    <rect x="14" y="14" width="7" height="7" rx="1"/>
                    <rect x="3" y="14" width="7" height="7" rx="1"/>
                </svg>
            </div>
            <h1 class="auth-title">PIMS ÁÆ°ÁêÜÁ≥ªÁªü</h1>
            <p class="auth-description">ËØ∑‰ΩøÁî®ÊéàÊùÉÁöÑ Google Ë¥¶Êà∑ÁôªÂΩï</p>
            <button class="btn btn-black btn-lg" onclick="loginWithGoogle()">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                ‰ΩøÁî® Google ÁôªÂΩï
            </button>
            <div id="auth-loading" class="auth-loading" style="display: none;">
                <div class="spinner"></div>
                <p>Ê≠£Âú®È™åËØÅ...</p>
            </div>
        </div>
    </div>

    <div class="app-container" id="app-container" style="display: none;">
        <!-- ‰æßËæπÊ†è -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>PIMS</h1>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-item active" onclick="navigate('dashboard')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="7" height="7" rx="1"/>
                        <rect x="14" y="3" width="7" height="7" rx="1"/>
                        <rect x="14" y="14" width="7" height="7" rx="1"/>
                        <rect x="3" y="14" width="7" height="7" rx="1"/>
                    </svg>
                    <span>‰ª™Ë°®Áõò</span>
                </div>
                <div class="nav-item" onclick="navigate('sku')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                    </svg>
                    <span>SKUÁÆ°ÁêÜ</span>
                </div>
                <div class="nav-item" onclick="navigate('inbound')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <polyline points="19 12 12 19 5 12"/>
                    </svg>
                    <span>ÂÖ•Â∫ì</span>
                </div>
                <div class="nav-item" onclick="navigate('outbound')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <line x1="12" y1="19" x2="12" y2="5"/>
                        <polyline points="5 12 12 5 19 12"/>
                    </svg>
                    <span>Âá∫Â∫ì</span>
                </div>
                <div class="nav-item" onclick="navigate('stock')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    <span>Â∫ìÂ≠òÁÆ°ÁêÜ</span>
                </div>
                <div class="nav-item" onclick="navigate('expenses')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                    <span>Ë¥πÁî®ÁÆ°ÁêÜ</span>
                </div>
                <div class="nav-item" onclick="navigate('settings')">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"></path>
                    </svg>
                    <span>Á≥ªÁªüËÆæÁΩÆ</span>
                </div>
            </nav>
        </aside>
        
        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="main-content">
            <div class="topbar flex-row flex-between">
                <div class="flex-row flex-gap-12">
                    <button id="menu-toggle" class="btn-icon mobile-only" style="display: none;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <h2 id="page-title">‰ª™Ë°®Áõò</h2>
                </div>
                <div class="auth-bar flex-row flex-gap-12">
                    <span id="user-email" class="text-secondary" style="font-size:13px;"></span>
                    <button id="login-btn" class="btn btn-outline" onclick="loginWithGoogle()">ÁôªÂΩï</button>
                    <button id="logout-btn" class="btn btn-outline" onclick="logout()" style="display:none;">ÈÄÄÂá∫</button>
                </div>
            </div>
            
            <div class="content-area">
                <!-- ‰ª™Ë°®ÁõòËßÜÂõæ -->
            <div id="dashboard-view" class="view active">
                <div class="dashboard-grid">
                    <!-- 1. Êú¨ÊúàÈîÄÂîÆÈ¢ù -->
                    <div class="stat-card large">
                        <div class="stat-header">
                            <div class="stat-title">Êú¨ÊúàÈîÄÂîÆÈ¢ù (THB)</div>
                            <div class="stat-total text-primary" id="dashboard-revenue">‡∏ø 0.00</div>
                        </div>
                        <div class="stat-body" id="dashboard-revenue-body">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- 2. Êú¨ÊúàÁ∫ØÂà©Ê∂¶ -->
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">Êú¨ÊúàÁ∫ØÂà©Ê∂¶ (THB)</div>
                            <div class="stat-total text-success" id="dashboard-profit">‡∏ø 0.00</div>
                        </div>
                        <div class="stat-body-simple" id="dashboard-profit-body">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- 3. Â∫ìÂ≠òÊÄª‰ª∑ÂÄº -->
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">Â∫ìÂ≠òÊÄª‰ª∑ÂÄº (RMB)</div>
                            <div class="stat-total text-primary" id="dashboard-inventory-value">¬• 0.00</div>
                        </div>
                        <div class="stat-body-simple" id="dashboard-inventory-value-body">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- 4. Â∫ìÂ≠òÊï∞Èáè -->
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">Â∫ìÂ≠òÊï∞Èáè</div>
                            <div class="stat-total" id="dashboard-inventory-qty">0 <span class="unit">‰ª∂</span></div>
                        </div>
                        <div class="stat-body-simple" id="dashboard-inventory-qty-body">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- 5. ‰ΩéÂ∫ìÂ≠òÈ¢ÑË≠¶ -->
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">‰ΩéÂ∫ìÂ≠òÈ¢ÑË≠¶</div>
                            <div class="stat-total text-error" id="dashboard-low-stock">0 <span class="unit">‰∏™</span></div>
                        </div>
                        <div class="stat-body-simple" id="dashboard-low-stock-body">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- 6. SKU Êï∞Èáè -->
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">SKU Êï∞Èáè</div>
                            <div class="stat-total" id="dashboard-sku-count">0 <span class="unit">‰∏™</span></div>
                        </div>
                        <div class="stat-body-simple" id="dashboard-sku-count-body">
                            <!-- Dynamic Content -->
                        </div>
                    </div>
                </div>
            </div>


                <!-- SKU ÁÆ°ÁêÜËßÜÂõæ -->
                <div id="sku-view" class="view">
                    <!-- È°∂ÈÉ®Êìç‰ΩúÂå∫ -->
                    <div class="sku-header-panel">
                        <div class="input-group-large">
                            <div class="input-wrapper">
                                <svg class="icon-search" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                                <input type="text" id="sku-main-input" placeholder="Êñ∞Âª∫ÊàñÊêúÁ¥¢ SKU / Êù°Á†Å / ‰∫ßÂìÅÂêçÁß∞..." autocomplete="off">
                                <button class="btn-icon-only scan-btn" title="‰ΩøÁî®ÊëÑÂÉèÂ§¥Êâ´Êèè">
                                    <svg viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                                </button>
                            </div>
                            <div class="action-buttons-row">
                                <button class="btn btn-black btn-lg" onclick="handleSearch()">
                                    <svg class="btn-icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                                    ÊêúÁ¥¢
                                </button>
                                <button class="btn btn-outline btn-lg" onclick="handleCreate()">
                                    <svg class="btn-icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                                <button class="btn btn-outline btn-lg" onclick="importSKU()">
                                    <svg class="btn-icon" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                    ÊâπÈáè‰∏ä‰º†
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- SKU ÂàóË°®Âå∫Âüü -->
                    <div class="table-container">
                        <table class="data-table sku-table-compact">
                            <thead>
                                <tr>
                                    <th class="col-id">ID</th>
                                    <th class="col-img-lg">‰∫ßÂìÅÂõæÁâá</th>
                                    <th class="col-barcode">‰∫ßÂìÅÊù°Á†Å</th>
                                    <th>‰∫ßÂìÅ‰ø°ÊÅØ</th>
                                    <th class="col-price">ÈááË¥≠‰ª∑</th>
                                    <th class="col-price">ÈîÄÂîÆ‰ª∑</th>
                                    <th class="col-url text-center">URL</th>
                                    <th class="col-status text-center">Áä∂ÊÄÅ</th>
                                    <th class="col-action text-center">Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td colspan="9" class="text-center">Âä†ËΩΩ‰∏≠...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Âä†ËΩΩÊõ¥Â§ö/Âà∞Â∫ïÊèêÁ§∫ -->
                    <div id="sku-loading-sentinel" class="text-center py-4 text-secondary">
                        <span class="loading-text" style="display: none;">Âä†ËΩΩ‰∏≠...</span>
                        <span class="no-more-data" style="display: none;">Â∑≤ÁªèÊòæÁ§∫ÂÖ®ÈÉ®Êï∞ÊçÆ,Ê≤°Êúâ‰∫Ü.</span>
                    </div>
                </div>

                <!-- ÂÖ•Â∫ìËßÜÂõæ -->
                <div id="inbound-view" class="view">
                    <!-- ‰∏äÈÉ®ÔºöÊìç‰ΩúÂå∫ -->
                    <div class="card inbound-header-panel">
                        <div class="inbound-controls">
                            <!-- 1. SKU Êâ´Á†ÅËæìÂÖ• -->
                            <div class="floating-label-group main-input">
                                <input type="text" id="inbound-sku-input" placeholder=" " autocomplete="off" class="input-with-scan">
                                <label>Êâ´Êèè/ËæìÂÖ• SKU</label>
                                <button class="btn-icon-only scan-btn" title="ÂºÄÂêØÊëÑÂÉèÂ§¥">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                                </button>
                            </div>

                            <!-- 2. ‰ªìÂ∫ìÈÄâÊã© -->
                            <div class="floating-label-group">
                                <select id="inbound-warehouse" name="warehouse_code" autocomplete="off">
                                    <option value=""></option>
                                    <option value="__new__">+ Êñ∞Âª∫...</option>
                                </select>
                                <label>ÂÖ•Â∫ì‰ªìÂ∫ì</label>
                            </div>

                            <!-- 3. ÂÖ•Â∫ìÁ±ªÂûã -->
                            <div class="floating-label-group">
                                <select id="inbound-type" name="inbound_type_code" autocomplete="off">
                                    <option value=""></option>
                                    <option value="__new__">+ Êñ∞Âª∫...</option>
                                </select>
                                <label>ÂÖ•Â∫ìÁ±ªÂûã</label>
                            </div>

                            <!-- 4. ÈááË¥≠ÂçïÂØºÂÖ• -->
                            <div class="control-group flex-fixed">
                                <button class="btn btn-outline btn-lg-height" onclick="document.getElementById('inbound-import-file').click()">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                    ÂØºÂÖ•ÈááË¥≠Âçï
                                </button>
                                <input type="file" id="inbound-import-file" accept=".xlsx,.xls" onchange="handleInboundImportFile(event)" hidden>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ãÈÉ®ÔºöÂæÖÂÖ•Â∫ìÊ∏ÖÂçï -->
                    <div class="card inbound-list-panel">
                        <div class="panel-header">
                            <div class="panel-title">ÂæÖÂÖ•Â∫ìÊ∏ÖÂçï</div>
                            <div class="panel-actions">
                                <button class="btn btn-outline" onclick="clearPendingInbound()">Ê∏ÖÈô§ÂàóË°®</button>
                                <button class="btn btn-black" onclick="submitInbound()">Á°ÆËÆ§ÂÖ•Â∫ì</button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table inbound-table">
                                <thead>
                                    <tr>
                                        <th style="width: 60px">Â∫èÂè∑</th>
                                        <th style="width: 100px">ÂõæÁâá</th>
                                        <th class="col-product-info">‰∫ßÂìÅ‰ø°ÊÅØ</th>
                                        <th style="width: 120px">ÈááË¥≠Êï∞Èáè</th>
                                        <th style="width: 120px">ÂÖ•Â∫ìÊï∞Èáè</th>
                                        <th style="width: 80px" class="text-center">Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="inbound-list-body">
                                    <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
                                </tbody>
                            </table>
                            <!-- Á©∫Áä∂ÊÄÅÊèêÁ§∫ -->
                            <div id="inbound-empty-state" class="empty-state">
                                <div class="empty-icon">üì¶</div>
                                <div class="empty-text">ÊöÇÊó†ÂÖ•Â∫ìÂïÜÂìÅÔºåËØ∑Êâ´ÊèèÊù°Á†ÅÊàñÂØºÂÖ•ÈááË¥≠Âçï</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Âá∫Â∫ìËßÜÂõæ -->
                <div id="outbound-view" class="view">
                    <!-- ‰∏äÈÉ®ÔºöÊìç‰ΩúÂå∫ -->
                    <div class="card outbound-header-panel">
                        <div class="outbound-controls">
                            <!-- Á¨¨1Ë°å: SKU Êâ´Á†ÅËæìÂÖ• (ÂçïÁã¨‰∏ÄË°å) -->
                            <div class="floating-label-group main-input" style="grid-column: 1 / -1;">
                                <input type="text" id="outbound-sku-input" placeholder=" " autocomplete="off" class="input-with-scan">
                                <label>Êâ´Êèè/ËæìÂÖ• SKU</label>
                                <button class="btn-icon-only scan-btn" title="ÂºÄÂêØÊëÑÂÉèÂ§¥">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                                </button>
                            </div>

                            <!-- Á¨¨2Ë°å: Âá∫Â∫ì‰ªìÂ∫ì / Âá∫Â∫ìÁ±ªÂûã / ÈîÄÂîÆÊ∏†ÈÅì / ÂØºÂÖ•ËÆ¢Âçï -->
                            <!-- 2.1 Âá∫Â∫ì‰ªìÂ∫ì -->
                            <div class="floating-label-group">
                                <select id="outbound-warehouse" name="warehouse_code" autocomplete="off">
                                    <option value=""></option>
                                </select>
                                <label>Âá∫Â∫ì‰ªìÂ∫ì</label>
                            </div>

                            <!-- 2.2 Âá∫Â∫ìÁ±ªÂûã -->
                            <div class="floating-label-group">
                                <select id="outbound-type" name="outbound_type_code" autocomplete="off">
                                    <option value=""></option>
                                </select>
                                <label>Âá∫Â∫ìÁ±ªÂûã</label>
                            </div>

                            <!-- 2.3 ÈîÄÂîÆÊ∏†ÈÅì -->
                            <div class="floating-label-group" id="outbound-channel-group">
                                <select id="outbound-channel" name="sales_channel" autocomplete="off">
                                    <option value=""></option>
                                </select>
                                <label>ÈîÄÂîÆÊ∏†ÈÅì</label>
                            </div>

                            <!-- 2.4 ËÆ¢ÂçïÂØºÂÖ• -->
                            <div class="control-group" style="flex: 0 0 auto;">
                                <button class="btn btn-outline btn-lg-height" onclick="triggerOrderUpload()">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                    ÂØºÂÖ•ËÆ¢Âçï
                                </button>
                                <input type="file" id="order-upload-input" accept=".xlsx,.xls,.csv" hidden>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ãÈÉ®ÔºöÂæÖÂá∫Â∫ìÊ∏ÖÂçï -->
                    <div class="card outbound-list-panel">
                        <div class="panel-header">
                            <div class="panel-title">ÂæÖÂá∫Â∫ìÊ∏ÖÂçï</div>
                            <div class="panel-actions">
                                <button class="btn btn-black" onclick="submitOutbound()">Á°ÆËÆ§Âá∫Â∫ì</button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table outbound-table">
                                <thead>
                                    <tr>
                                        <th class="col-seq">Â∫èÂè∑</th>
                                        <th class="col-img">ÂõæÁâá</th>
                                        <th>‰∫ßÂìÅ‰ø°ÊÅØ</th>
                                        <th class="col-qty">ÂΩìÂâçÂ∫ìÂ≠ò</th>
                                        <th class="col-qty">Âá∫Â∫ìÊï∞Èáè</th>
                                        <th class="col-action text-center">Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="outbound-list-body">
                                    <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
                                </tbody>
                            </table>
                            <!-- Á©∫Áä∂ÊÄÅÊèêÁ§∫ -->
                            <div id="outbound-empty-state" class="empty-state">
                                <div class="empty-icon">üì§</div>
                                <div class="empty-text">ÊöÇÊó†Âá∫Â∫ìÂïÜÂìÅÔºåËØ∑Êâ´ÊèèÊù°Á†ÅÊàñÂØºÂÖ•ËÆ¢Âçï</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ìÂ≠òËßÜÂõæ -->
                <div id="stock-view" class="view">
                    <!-- ‰∏äÈÉ®ÔºöÊêúÁ¥¢Âå∫ -->
                    <div class="card stock-header-panel">
                        <div class="stock-controls">
                            <!-- 1. SKU ÊêúÁ¥¢ËæìÂÖ• -->
                            <div class="floating-label-group main-input">
                                <input type="text" id="stock-search-input" placeholder=" " autocomplete="off" class="input-with-scan">
                                <label>ÊêúÁ¥¢ SKU / Êù°Á†Å / ‰∫ßÂìÅÂêçÁß∞</label>
                                <button class="btn-icon-only scan-btn" title="ÂºÄÂêØÊëÑÂÉèÂ§¥">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                                </button>
                            </div>

                            <!-- 2. ‰ªìÂ∫ìÈÄâÊã© -->
                            <div class="floating-label-group">
                                <select id="stock-warehouse" name="warehouse_code" autocomplete="off">
                                    <option value="">ÂÖ®ÈÉ®‰ªìÂ∫ì</option>
                                    <option value="__new__">+ Êñ∞Âª∫...</option>
                                </select>
                                <label>‰ªìÂ∫ì</label>
                            </div>

                            <!-- 3. ÊêúÁ¥¢ÊåâÈíÆ -->
                            <div class="control-group" style="flex: 0 0 auto;">
                                <button class="btn btn-black btn-lg-height" onclick="searchStock()">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                                    ÊêúÁ¥¢
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ãÈÉ®ÔºöÂ∫ìÂ≠òÂàóË°® -->
                    <div class="card stock-list-panel">
                        <div class="panel-header">
                            <div class="panel-title">Â∫ìÂ≠òÂàóË°®</div>
                            <div class="panel-info text-secondary">
                                SKU: <strong id="stock-sku-count">0</strong>‰∏™ / 
                                Â∫ìÂ≠ò: <strong id="stock-quantity-total">0</strong>‰∏™ / 
                                ‰∏ª‰ªì: <strong id="stock-main-warehouse">0</strong>‰∏™ / 
                                ÂîÆÂêé‰ªì: <strong id="stock-aftersale-warehouse">0</strong>‰∏™
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table stock-table">
                                <thead>
                                    <tr>
                                        <th class="col-seq">Â∫èÂè∑</th>
                                        <th class="col-img">‰∫ßÂìÅÂõæÁâá</th>
                                        <th>‰∫ßÂìÅ‰ø°ÊÅØ</th>
                                        <th class="col-warehouse">‰ªìÂ∫ì</th>
                                        <th class="col-qty-sm">Â∫ìÂ≠òÊï∞Èáè</th>
                                        <th class="col-qty-sm">ÂÆâÂÖ®Â∫ìÂ≠ò</th>
                                        <th class="col-qty-sm text-center">URL</th>
                                        <th class="col-qty-sm text-center">Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="stock-list-body">
                                    <tr><td colspan="8" class="text-center">Âä†ËΩΩ‰∏≠...</td></tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Âä†ËΩΩÊõ¥Â§ö/Âà∞Â∫ïÊèêÁ§∫ -->
                        <div id="stock-loading-sentinel" class="text-center py-4 text-secondary">
                            <span class="loading-text" style="display: none;">Âä†ËΩΩ‰∏≠...</span>
                            <span class="no-more-data" style="display: none;">Â∑≤ÁªèÊòæÁ§∫ÂÖ®ÈÉ®Êï∞ÊçÆ,Ê≤°Êúâ‰∫Ü.</span>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Ë¥πÁî®ÁÆ°ÁêÜ -->
                <div id="expenses-view" class="view">
                    <!-- ‰∏äÈÉ®ÔºöÂø´ÈÄüÂΩïÂÖ• -->
                    <div class="card expenses-entry-panel">
                        <div class="panel-header">
                            <div class="panel-title">Âø´ÈÄüÂΩïÂÖ•Ë¥πÁî®</div>
                        </div>
                        <div class="entry-form">
                            <div class="form-row">
                                <div class="floating-label-group">
                                    <input type="date" id="new-expense-date" autocomplete="off" placeholder=" ">
                                    <label>Êó•Êúü</label>
                                </div>
                                <div class="floating-label-group">
                                    <select id="new-expense-type" name="expense_type" autocomplete="off">
                                        <option value="">ËØ∑ÈÄâÊã©...</option>
                                    </select>
                                    <label>Ë¥πÁî®Á±ªÂûã</label>
                                </div>
                                <div class="control-group">
                                    <div class="floating-label-group">
                                        <input type="number" id="new-expense-amount" placeholder=" " step="0.01">
                                        <label>ÈáëÈ¢ù</label>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="floating-label-group">
                                        <select id="new-expense-currency" placeholder=" ">
                                            <option value="THB">THB (‡∏ø)</option>
                                            <option value="RMB">RMB (¬•)</option>
                                        </select>
                                        <label>Â∏ÅÁßç</label>
                                    </div>
                                </div>
                                <div class="floating-label-group flex-2">
                                    <input type="text" id="new-expense-note" placeholder=" " autocomplete="off">
                                    <label>Â§áÊ≥®</label>
                                </div>
                                <div class="control-group" style="flex: 0 0 auto;">
                                    <div class="image-upload-wrapper" style="position: relative;">
                                        <input type="file" id="expense-image-input" accept="image/*" hidden>
                                        <button class="btn btn-outline btn-block btn-lg-height" onclick="document.getElementById('expense-image-input').click()">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                                            ÈÄâÊã©ÂõæÁâá
                                        </button>
                                        <div id="expense-image-success" class="upload-success-badge" style="display: none;">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                                <polyline points="20 6 9 17 4 12"></polyline>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group" style="flex: 0 0 auto;">
                                    <button class="btn btn-black btn-block btn-lg-height" onclick="addExpense()">
                                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                        Ê∑ªÂä†
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏≠ÈÉ®ÔºöÁ≠õÈÄâÂå∫ -->
                    <div class="card expenses-filter-panel">
                        <div class="panel-header">
                            <div class="panel-title">Ë¥πÁî®Á≠õÈÄâ</div>
                        </div>
                        <div class="expenses-filters">
                            <div class="filter-row">
                                <div class="floating-label-group">
                                    <select id="expense-type-filter" name="expense_type" autocomplete="off">
                                        <option value="">ÂÖ®ÈÉ®Á±ªÂûã</option>
                                    </select>
                                    <label>Ë¥πÁî®Á±ªÂûã</label>
                                </div>
                                <div class="floating-label-group">
                                    <input type="date" id="date-from" placeholder=" ">
                                    <label>ÂºÄÂßãÊó•Êúü</label>
                                </div>
                                <div class="floating-label-group">
                                    <input type="date" id="date-to" placeholder=" ">
                                    <label>ÁªìÊùüÊó•Êúü</label>
                                </div>
                                <div class="control-group">
                                    <div class="quick-date-buttons">
                                        <button class="btn-quick-date" onclick="selectQuickDate('today')">‰ªäÂ§©</button>
                                        <button class="btn-quick-date" onclick="selectQuickDate('thisWeek')">Êú¨Âë®</button>
                                        <button class="btn-quick-date" onclick="selectQuickDate('thisMonth')">Êú¨Êúà</button>
                                        <button class="btn-quick-date" onclick="selectQuickDate('lastMonth')">‰∏äÊúà</button>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-actions-row" style="display: flex; justify-content: flex-end; margin-top: 12px;">
                                <div class="action-buttons">
                                    <button class="btn btn-black btn-lg-height" onclick="applyFilters()">
                                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                                        Á≠õÈÄâ
                                    </button>
                                    <button class="btn btn-outline btn-lg-height" onclick="resetFilters()">
                                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg>
                                        ÈáçÁΩÆ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ãÈÉ®ÔºöË¥πÁî®ÊòéÁªÜÂàóË°® -->
                    <div class="card expenses-list-panel">
                        <div class="panel-header">
                            <div class="panel-title">Ë¥πÁî®ÊòéÁªÜ</div>
                            <div class="panel-info text-secondary">
                                ÂÖ± <strong>45</strong> Êù°ËÆ∞ÂΩï | ÊÄªËÆ°: <strong class="text-error">‡∏ø 12,580.50</strong>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table expenses-table">
                                <thead>
                                    <tr>
                                        <th class="col-seq">Â∫èÂè∑</th>
                                        <th class="col-date">Êó•Êúü</th>
                                        <th class="col-type">Ë¥πÁî®Á±ªÂûã</th>
                                        <th class="col-qty text-right">ÈáëÈ¢ù</th>
                                        <th>Â§áÊ≥®</th>
                                        <th class="col-action">Âá≠ËØÅ</th>
                                        <th class="col-action-lg text-center">Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="expenses-list-body">
                                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Á≥ªÁªüËÆæÁΩÆ -->
                <div id="settings-view" class="view">
                    <div class="settings-grid">
                        
                        <!-- Â∫óÈì∫ËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">Â∫óÈì∫</div>
                            <div class="settings-list" id="shop-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('shop')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                        <!-- ‰ªìÂ∫ìËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">‰ªìÂ∫ì</div>
                            <div class="settings-list" id="warehouse-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('warehouse')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                        <!-- ÂÖ•Â∫ìÁ±ªÂûãËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">ÂÖ•Â∫ìÁ±ªÂûã</div>
                            <div class="settings-list" id="inbound_type-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('inbound_type')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                        <!-- Âá∫Â∫ìÁ±ªÂûãËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">Âá∫Â∫ìÁ±ªÂûã</div>
                            <div class="settings-list" id="outbound_type-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('outbound_type')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                        <!-- Ë¥πÁî®Á±ªÂûãËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">Ë¥πÁî®Á±ªÂûã</div>
                            <div class="settings-list" id="expense_type-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('expense_type')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                        <!-- SKUÁä∂ÊÄÅËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">SKU Áä∂ÊÄÅ</div>
                            <div class="settings-list" id="status-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('status')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                        <!-- ÈîÄÂîÆÊ∏†ÈÅìËÆæÁΩÆÂç°Áâá -->
                        <div class="card">
                            <div class="card-title">ÈîÄÂîÆÊ∏†ÈÅì</div>
                            <div class="settings-list" id="sales_channel-list">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                            <div class="settings-add-row" style="justify-content: flex-end; border-top: none; padding-top: 0;">
                                <button class="btn btn-sm btn-outline" onclick="openAddSettingModal('sales_channel')">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                    Êñ∞Âª∫
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
        </main>
    </div>

    <!-- SKU Ê®°ÊÄÅÊ°Ü -->
    <div id="sku-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>SKU ‰ø°ÊÅØ</h3>
                <button class="btn-close" onclick="closeModal('sku-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="sku-form">
                    <div class="form-row">
                        <div class="floating-label-group">
                            <select name="shop_code" autocomplete="off">
                                <option value=""></option>
                                <option value="__new__">+ Êñ∞Âª∫...</option>
                            </select>
                            <label>Â∫óÈì∫</label>
                        </div>
                        <div class="floating-label-group">
                            <input type="text" name="barcode" id="modal-barcode-input" placeholder=" " autocomplete="off">
                            <label>Â§ñÈÉ®Êù°Á†Å</label>
                        </div>
                        <div class="floating-label-group">
                            <select name="status_code" autocomplete="off">
                                <option value=""></option>
                                <option value="__new__">+ Êñ∞Âª∫...</option>
                            </select>
                            <label>Áä∂ÊÄÅ</label>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="floating-label-group full-width">
                            <textarea name="product_info" rows="4" placeholder=" "></textarea>
                            <label>‰∫ßÂìÅ‰ø°ÊÅØ</label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="floating-label-group full-width">
                            <input type="text" name="url" placeholder=" " autocomplete="off">
                            <label>‰∫ßÂìÅÈìæÊé• URL</label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="floating-label-group">
                            <input type="number" name="purchase_price" min="0" step="0.01" placeholder=" " autocomplete="off">
                            <label>ÈááË¥≠‰ª∑ (RMB)</label>
                        </div>
                        <div class="floating-label-group">
                            <input type="number" name="sales_price" min="0" step="0.01" placeholder=" " autocomplete="off">
                            <label>ÈîÄÂîÆ‰ª∑ (THB)</label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>‰∫ßÂìÅÂõæÁâá (Ëá™Âä®‰∏ä‰º†)</label>
                            <div class="file-upload-area" id="sku-upload-area">
                                <input type="file" id="sku-img-input" accept="image/*" hidden>
                                <label for="sku-img-input" class="upload-label">
                                    <svg viewBox="0 0 24 24" width="32" height="32"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                                    <span>ÁÇπÂáªÈÄâÊã©ÂõæÁâá</span>
                                    <span class="text-sm text-secondary">ÈÄâÊã©ÂêéÂ∞ÜËá™Âä®‰∏ä‰º†Âπ∂ÈáçÂëΩÂêç</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('sku-modal')">ÂèñÊ∂à</button>
                <button class="btn btn-black" onclick="saveSKU()">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Âø´ÈÄüÊñ∞Âª∫Ê®°ÊÄÅÊ°Ü (Inbound) -->
    <div id="quick-create-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Êñ∞Âª∫ SKU (Êú™ÊâæÂà∞Êù°Á†Å)</h3>
                <button class="btn-close" onclick="closeModal('quick-create-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning" style="color: #856404; background-color: #fff3cd; border-color: #ffeeba; padding: 12px; border-radius: 4px; margin-bottom: 16px;">
                    Á≥ªÁªüÊú™ÊâæÂà∞Êù°Á†Å <strong id="unknown-barcode"></strong>ÔºåËØ∑ÂÖàÂàõÂª∫ËØ• SKU„ÄÇ
                </div>
                <form id="quick-create-form">
                    <div class="floating-label-group">
                        <input type="text" id="quick-barcode" readonly placeholder=" ">
                        <label>Êù°Á†Å</label>
                    </div>
                    <div class="floating-label-group">
                        <input type="text" placeholder=" " autocomplete="off">
                        <label>‰∫ßÂìÅÂêçÁß∞</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('quick-create-modal')">ÂèñÊ∂à</button>
                <button class="btn btn-black">ÂàõÂª∫Âπ∂ÂÖ•Â∫ì</button>
            </div>
        </div>
    </div>

    <!-- Â∫ìÂ≠ò‰∏çË∂≥Ë≠¶ÂëäÊ®°ÊÄÅÊ°Ü (Outbound) -->
    <div id="stock-warning-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Â∫ìÂ≠ò‰∏çË∂≥Ë≠¶Âëä</h3>
                <button class="btn-close" onclick="closeModal('stock-warning-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning" style="color: #856404; background-color: #fff3cd; border-color: #ffeeba; padding: 12px; border-radius: 4px; margin-bottom: 16px;">
                    ‰ª•‰∏ãÂïÜÂìÅÂ∫ìÂ≠ò‰∏çË∂≥ÔºåÊó†Ê≥ïÂÆåÊàêÂá∫Â∫ìÊìç‰ΩúÔºö
                </div>
                <ul id="warning-list" class="warning-list">
                    <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
                </ul>
            </div>
            <div class="modal-footer">
                <button class="btn btn-black" onclick="closeModal('stock-warning-modal')">Áü•ÈÅì‰∫Ü</button>
            </div>
        </div>
    </div>

    <!-- Â∫ìÂ≠òË∞ÉÊï¥Ê®°ÊÄÅÊ°Ü (Stock) -->
    <div id="adjust-stock-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Ë∞ÉÊï¥Â∫ìÂ≠ò</h3>
                <button class="btn-close" onclick="closeModal('adjust-stock-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="adjust-info">
                    <div class="info-row">
                        <span class="info-label">SKU ÁºñÁ†Å:</span>
                        <span class="info-value" id="adjust-sku-code"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">‰∫ßÂìÅÂêçÁß∞:</span>
                        <span class="info-value" id="adjust-sku-name"></span>
                    </div>
                </div>

                <div class="floating-label-group">
                    <select id="adjust-warehouse" required>
                        <option value="">ËØ∑ÈÄâÊã©‰ªìÂ∫ì</option>
                    </select>
                    <label>‰ªìÂ∫ì</label>
                </div>

                <div style="margin-bottom: 20px; padding: 0 4px; display: flex; align-items: center;">
                    <span class="info-label" style="color: #6b7280; font-size: 14px;">ÂΩìÂâçÂ∫ìÂ≠ò:</span>
                    <span class="info-value" id="adjust-current-stock" style="font-weight: 600; margin-left: 8px; font-size: 16px;">-</span>
                </div>

                <div class="floating-label-group">
                    <select id="adjust-type">
                        <option value="add">Â¢ûÂä†</option>
                        <option value="reduce">ÂáèÂ∞ë</option>
                        <option value="set">ËÆæÁΩÆ‰∏∫</option>
                    </select>
                    <label>Ë∞ÉÊï¥Á±ªÂûã</label>
                </div>

                <div class="floating-label-group">
                    <input type="number" id="adjust-qty" min="0" value="0" placeholder=" " autocomplete="off">
                    <label>Ë∞ÉÊï¥Êï∞Èáè</label>
                </div>

                <div class="floating-label-group">
                    <textarea id="adjust-note" rows="3" placeholder=" "></textarea>
                    <label>Â§áÊ≥®</label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('adjust-stock-modal')">ÂèñÊ∂à</button>
                <button class="btn btn-black" id="confirm-adjust-btn">Á°ÆËÆ§Ë∞ÉÊï¥</button>
            </div>
        </div>
    </div>

    <!-- ÂÖ®Â±ÄÁÅØÁÆ± -->
    <div id="global-lightbox" class="lightbox-overlay" onclick="closeLightbox()">
        <div class="lightbox-content">
            <img src="" alt="Large View">
            <button class="lightbox-close">&times;</button>
        </div>
    </div>

    <div id="confirm-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="confirm-title">Á°ÆËÆ§</h3>
                <button class="btn-close" id="confirm-close">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="confirm-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="confirm-cancel">ÂèñÊ∂à</button>
                <button class="btn btn-black" id="confirm-ok">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- ÁºñËæëËÆæÁΩÆÊ®°ÊÄÅÊ°Ü -->
    <div id="edit-setting-modal" class="modal-overlay">
        <div class="modal" style="max-width: 400px;">
            <div class="modal-header">
                <h3 id="edit-setting-title">ÁºñËæë</h3>
                <button class="btn-close" onclick="closeModal('edit-setting-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="floating-label-group full-width">
                    <input type="text" id="edit-setting-input" placeholder=" " autocomplete="off">
                    <label>ÂêçÁß∞</label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('edit-setting-modal')">ÂèñÊ∂à</button>
                <button class="btn btn-black" id="save-setting-btn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûÈÖçÁΩÆÊ®°ÊÄÅÊ°Ü -->
    <div id="add-setting-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Êñ∞Âª∫ÈÖçÁΩÆ</h3>
                <button class="btn-close" onclick="closeModal('add-setting-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="new-setting-type">
                <input type="hidden" id="new-setting-target-select">
                
                <div class="floating-label-group">
                    <input type="text" id="new-setting-name" placeholder=" " autocomplete="off">
                    <label>ÂêçÁß∞ (ÂøÖÂ°´)</label>
                </div>

                <div class="floating-label-group">
                    <input type="text" id="new-setting-code" placeholder=" " autocomplete="off">
                    <label>‰ª£Á†Å (ÂøÖÂ°´, Â§ßÂÜôÂ≠óÊØç/Êï∞Â≠ó/‰∏ãÂàíÁ∫ø)</label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('add-setting-modal')">ÂèñÊ∂à</button>
                <button class="btn btn-black" onclick="saveNewSetting()">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- ÁºñËæëË¥πÁî®Ê®°ÊÄÅÊ°Ü -->
    <div id="edit-expense-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>ÁºñËæëË¥πÁî®</h3>
                <button class="btn-close" onclick="closeModal('edit-expense-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-expense-id">
                <div class="form-row">
                    <div class="floating-label-group">
                        <input type="date" id="edit-expense-date" placeholder=" ">
                        <label>Êó•Êúü</label>
                    </div>
                    <div class="floating-label-group">
                        <select id="edit-expense-type" name="expense_type">
                            <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                        </select>
                        <label>Ë¥πÁî®Á±ªÂûã</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="floating-label-group">
                        <input type="number" id="edit-expense-amount" min="0" step="0.01" placeholder=" ">
                        <label>ÈáëÈ¢ù (THB)</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="floating-label-group flex-full">
                        <input type="text" id="edit-expense-note" placeholder=" ">
                        <label>Â§áÊ≥®</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="image-upload-wrapper flex-full">
                        <input type="file" id="edit-expense-image-input" accept="image/*" hidden>
                        <div class="image-preview-area" id="edit-expense-image-preview">
                            <!-- ÂõæÁâáÈ¢ÑËßàÊàñ‰∏ä‰º†ÊåâÈíÆ -->
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="document.getElementById('edit-expense-image-input').click()" style="margin-top: 10px;">
                            Êõ¥Êç¢ÂõæÁâá
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('edit-expense-modal')">ÂèñÊ∂à</button>
                <button class="btn btn-black" onclick="updateExpenseAction()">‰øùÂ≠ò‰øÆÊîπ</button>
            </div>
        </div>
    </div>

    <div id="loader" class="loader">Âä†ËΩΩ‰∏≠...</div>
    <div id="toast-container" class="toast-container"></div>

    <div id="sku-detail-modal" class="modal-overlay">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3>SKU ËØ¶ÊÉÖ</h3>
                <button class="btn-close" onclick="closeModal('sku-detail-modal')">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body" id="sku-detail-body"></div>
            <div class="modal-footer">
                <button class="btn btn-black" onclick="closeModal('sku-detail-modal')">ÂÖ≥Èó≠</button>
            </div>
        </div>
    </div>

    <!-- Êù°Á†ÅÊâ´ÊèèÊ®°ÊÄÅÊ°Ü -->
    <div id="barcode-scanner-modal" class="modal-overlay">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Êâ´ÊèèÊù°Á†Å</h3>
                <button class="btn-close" onclick="closeBarcodeScanner()">
                    <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body" style="padding: 0;">
                <div id="scanner-container">
                    <div id="scanner-viewport"></div>
                    <div class="scanner-overlay">
                        <div class="scanner-frame"></div>
                        <p class="scanner-hint">Â∞ÜÊù°Á†ÅÂØπÂáÜÊâ´ÊèèÊ°Ü</p>
                    </div>
                </div>
                <div id="scanner-error" class="scanner-error" style="display: none;">
                    <p>Êó†Ê≥ïËÆøÈóÆÊëÑÂÉèÂ§¥</p>
                    <button class="btn btn-black" onclick="closeBarcodeScanner()">ÊâãÂä®ËæìÂÖ•</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊâπÈáèÂØºÂÖ• SKU Ê®°ÊÄÅÊ°Ü -->
    <div id="bulk-import-modal" class="modal-overlay" style="z-index: 9999;">
        <div class="modal-container" style="max-width: 1000px;">
            <div class="modal-header">
                <h3>ÊâπÈáèÂØºÂÖ• SKU</h3>
                <button class="modal-close" onclick="closeModal('bulk-import-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- ‰∏äÈÉ®ÂàÜÔºö‰∏§ÂàóÂ∏ÉÂ±Ä -->
                <div class="import-layout">
                    <!-- Â∑¶‰æßÔºöÊñá‰ª∂‰∏ä‰º† -->
                    <div class="import-upload-section">
                        <div class="form-group">
                            <label>ÈÄâÊã© Excel Êñá‰ª∂</label>
                            <input type="file" id="bulk-import-file" accept=".xlsx,.xls" onchange="handleBulkImportFile(event)">
                        </div>
                    </div>
                    
                    <!-- Âè≥‰æßÔºöÈ™åËØÅÁªìÊûú -->
                    <div class="import-validation-section">
                        <div id="import-validation-result" style="display: none;"></div>
                    </div>
                </div>
                
                <!-- ‰∏ãÈÉ®ÂàÜÔºöÊï∞ÊçÆÈ¢ÑËßà -->
                <div id="import-preview-container" style="display: none;">
                    <h4>Êï∞ÊçÆÈ¢ÑËßàÔºàÂâç 10 Ë°åÔºâ</h4>
                    <div id="import-preview-table" class="table-container"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('bulk-import-modal')">ÂèñÊ∂à</button>
                <button id="confirm-bulk-import-btn" class="btn btn-black" onclick="confirmBulkImport()" disabled>Á°ÆËÆ§ÂØºÂÖ•</button>
            </div>
        </div>
    </div>


    <!-- ÂÖ•Â∫ìÊâπÈáèÂØºÂÖ•Ê®°ÊÄÅÊ°Ü -->
    <div id="inbound-bulk-import-modal" class="modal-overlay" style="z-index: 9999;">
        <div class="modal-container" style="max-width: 1200px;">
            <div class="modal-header">
                <h3>ÊâπÈáèÂÖ•Â∫ì</h3>
                <button class="modal-close" onclick="closeModal('inbound-bulk-import-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- ‰∏äÈÉ®ÂàÜÔºö‰∏§ÂàóÂ∏ÉÂ±Ä -->
                <div class="import-layout">
                    <!-- Â∑¶‰æßÔºöÊñá‰ª∂‰∏ä‰º† -->
                    <div class="import-upload-section">
                        <div class="form-group">
                            <label>ÈÄâÊã© Excel Êñá‰ª∂</label>
                            <input type="file" id="inbound-import-file" accept=".xlsx,.xls" onchange="handleInboundImportFile(event)">
                            <p class="form-hint">Excel ÈúÄÂåÖÂê´ÔºöSKU ID„ÄÅÂÖ•Â∫ìÊï∞Èáè</p>
                        </div>
                    </div>
                    
                    <!-- Âè≥‰æßÔºöÈ™åËØÅÁªìÊûú -->
                    <div class="import-validation-section">
                        <div id="inbound-validation-result" style="display: none;"></div>
                    </div>
                </div>
                
                <!-- ‰∏ãÈÉ®ÂàÜÔºö‰∫ßÂìÅÈ¢ÑËßà -->
                <div id="inbound-preview-container" style="display: none;">
                    <h4>ÂÖ•Â∫ìÈ¢ÑËßà</h4>
                    <div id="inbound-preview-table" class="table-container"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('inbound-bulk-import-modal')">ÂèñÊ∂à</button>
                <button id="confirm-inbound-import-btn" class="btn btn-black" onclick="confirmInboundImport()" disabled>Á°ÆËÆ§ÂÖ•Â∫ì</button>
            </div>
        </div>
    </div>


    <!-- È™åËØÅÈîôËØØËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
    <div id="validation-error-modal" class="modal-overlay" style="z-index: 10000;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Êï∞ÊçÆÈ™åËØÅÁªìÊûú</h3>
                <button class="modal-close" onclick="closeModal('validation-error-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <div id="validation-error-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-black" onclick="closeModal('validation-error-modal')">ÂÖ≥Èó≠</button>
            </div>
        </div>
    </div>


    <!-- ÈáçÂ§ç SKU ÂàóË°®Ê®°ÊÄÅÊ°Ü -->
    <div id="duplicate-list-modal" class="modal-overlay" style="z-index: 10000;">
        <div class="modal-container" style="max-width: 700px;">
            <div class="modal-header">
                <h3>ÂèëÁé∞ÈáçÂ§ç SKU</h3>
                <button class="modal-close" onclick="closeModal('duplicate-list-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <div id="duplicate-list-content"></div>
            </div>
        </div>
    </div>


    <!-- ÈáçÂ§ç SKU ËØ¶ÁªÜÂØπÊØîÊ®°ÊÄÅÊ°Ü -->
    <div id="duplicate-comparison-modal" class="modal-overlay" style="z-index: 10001;">
        <div class="modal-container" style="max-width: 800px;">
            <div class="modal-header">
                <h3>SKU ÂÜ≤Á™ÅÂØπÊØî</h3>
                <button class="modal-close" onclick="closeModal('duplicate-comparison-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <div id="duplicate-comparison-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="handleCurrentDuplicate('skip')">Ë∑≥ËøáÊ≠§Êù°</button>
                <button class="btn btn-outline" onclick="handleCurrentDuplicate('overwrite')">Ë¶ÜÁõñÊõ¥Êñ∞</button>
                <button class="btn btn-outline" onclick="handleRemainingDuplicates('skip')">ÂÖ®ÈÉ®Ë∑≥Ëøá</button>
                <button class="btn btn-black" onclick="handleRemainingDuplicates('overwrite')">ÂÖ®ÈÉ®Ë¶ÜÁõñ</button>
            </div>
        </div>
    </div>

    <!-- Ë¥πÁî®ÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="edit-expense-modal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3>ÁºñËæëË¥πÁî®</h3>
                <button class="modal-close" onclick="closeEditExpenseModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="floating-label-group">
                        <input type="date" id="edit-expense-date" placeholder=" ">
                        <label>Êó•Êúü</label>
                    </div>
                    <div class="floating-label-group">
                        <select id="edit-expense-type" placeholder=" ">
                            <option value="">ËØ∑ÈÄâÊã©</option>
                        </select>
                        <label>Ë¥πÁî®Á±ªÂûã</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="floating-label-group">
                        <input type="number" id="edit-expense-amount" placeholder=" " step="0.01">
                        <label>ÈáëÈ¢ù</label>
                    </div>
                    <div class="floating-label-group">
                        <select id="edit-expense-currency" placeholder=" ">
                            <option value="THB">THB (‡∏ø)</option>
                            <option value="RMB">RMB (¬•)</option>
                        </select>
                        <label>Â∏ÅÁßç</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="floating-label-group full-width">
                        <input type="text" id="edit-expense-note" placeholder=" ">
                        <label>Â§áÊ≥®</label>
                    </div>
                </div>
                <div class="form-row">
                    <div style="flex: 1;">
                        <div class="image-upload-wrapper" style="position: relative;">
                            <input type="file" id="edit-expense-image-input" accept="image/*" hidden>
                            <button class="btn btn-outline btn-block btn-lg-height" onclick="document.getElementById('edit-expense-image-input').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                                ÈáçÊñ∞‰∏ä‰º†ÂõæÁâá
                            </button>
                            <div id="edit-expense-image-success" class="upload-success-badge" style="display: none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </div>
                        </div>
                        <div id="edit-expense-current-image" style="margin-top: 12px; display: none;">
                            <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px;">ÂΩìÂâçÂõæÁâá:</div>
                            <img id="edit-expense-image-preview" style="max-width: 200px; max-height: 150px; border-radius: 4px; border: 1px solid #e5e7eb; cursor: pointer;" onclick="if(this.src) showLightbox(this.src)">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEditExpenseModal()">ÂèñÊ∂à</button>
                <button class="btn btn-black" onclick="saveExpenseEdit()">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>


    <!-- ‰æßËæπÊ†èÈÅÆÁΩ© -->
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <script src="js/barcode-scanner.js"></script>
    <script src="js/sku-bulk-import.js" charset="utf-8"></script>
    <script src="js/inbound-bulk-import.js?v=20251125-0312-notimeout"></script>
    <script src="js/outbound-defaults.js?v=20251125-1734"></script>
    <script type="module" src="js/app.js?v=20251125-1734"></script>

</body>
</html>
