# PIMS é¡¹ç›®å¼€å‘è§„åˆ™

> æœ¬è§„åˆ™æ–‡ä»¶å®šä¹‰äº† PIMS (Product Inventory Management System) é¡¹ç›®çš„å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µ

---

## ğŸ“Š æ•°æ®åº“è®¿é—®è§„èŒƒ

### 1. ä¼˜å…ˆä½¿ç”¨è§†å›¾
- âœ… **æŸ¥è¯¢æ—¶ä¼˜å…ˆä½¿ç”¨è§†å›¾**: `v_skus`, `v_stock_movements`, `v_current_stock` ç­‰
- âœ… **è§†å›¾åŒ…å«å…³è”æ•°æ®**: æ— éœ€æ‰‹åŠ¨ JOIN,å‡å°‘å®¢æˆ·ç«¯å¤æ‚åº¦
- âš ï¸ **æ›´æ–°æ—¶ä½¿ç”¨åŸºç¡€è¡¨**: `skus`, `stock_movements`, `expenses`, `settings`

```javascript
// âœ… æ¨è
const { data } = await supabase.from('v_skus').select('*');

// âŒ é¿å…
const { data } = await supabase.from('skus').select('*, settings!shop_code(name)');
```

### 2. éµå¾ªæ•°æ®åº“æ¶æ„æ–‡æ¡£
- ğŸ“„ **å‚è€ƒæ–‡æ¡£**: `database_schema.md` (ä½äº artifacts ç›®å½•)
- ğŸ”„ **ä¿æŒåŒæ­¥**: æ•°æ®åº“ç»“æ„å˜æ›´ååŠæ—¶æ›´æ–°æ–‡æ¡£
- âœ… **å­—æ®µå‘½å**: ä½¿ç”¨æ–‡æ¡£ä¸­å®šä¹‰çš„ç¡®åˆ‡å­—æ®µå

### 3. å­—æ®µå‘½åè§„èŒƒ
- `snake_case` - æ‰€æœ‰æ•°æ®åº“å­—æ®µä½¿ç”¨ä¸‹åˆ’çº¿å‘½å
- `_code` åç¼€ - ä»£ç å­—æ®µ (å¦‚ `shop_code`, `warehouse_code`)
- `_name` åç¼€ - åç§°å­—æ®µ (å¦‚ `shop_name`, `warehouse_name`)
- `_id` åç¼€ - ID å­—æ®µ (å¦‚ `sku_id`, `picture_id`)

### 4. è´§å¸å­—æ®µè§„èŒƒ
- `_rmb` åç¼€ - äººæ°‘å¸é‡‘é¢ (å¦‚ `purchase_price_rmb`, `unit_price_rmb`)
- `_thb` åç¼€ - æ³°é“¢é‡‘é¢ (å¦‚ `selling_price_thb`, `unit_price_thb`)

---

## ğŸ’» å‰ç«¯å¼€å‘è§„èŒƒ

### 1. æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: åŸç”Ÿ HTML + CSS + JavaScript (ES6+)
- **UI è®¾è®¡**: Google Material Design 3 (M3)
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **è®¤è¯**: Google OAuth (é™åˆ¶ç‰¹å®šé‚®ç®±)
- **éƒ¨ç½²**: GitHub Pages

### 2. ä»£ç ç»„ç»‡
- `index.html` - ä¸»é¡µé¢,åŒ…å«æ‰€æœ‰é¡µé¢æ¨¡æ¿
- `css/styles.css` - å…¨å±€æ ·å¼å’Œ M3 è®¾è®¡ç³»ç»Ÿ
- `js/supabase-client.js` - Supabase å®¢æˆ·ç«¯åˆå§‹åŒ–
- `js/auth.js` - è®¤è¯é€»è¾‘
- `js/app.js` - åº”ç”¨ä¸»é€»è¾‘å’Œè·¯ç”±

### 3. æ¨¡å—åŒ–åŸåˆ™
- æ¯ä¸ªåŠŸèƒ½é¡µé¢ç‹¬ç«‹çš„ JavaScript æ¨¡å—
- ä½¿ç”¨ ES6 æ¨¡å— (`export`/`import`)
- é¿å…å…¨å±€å˜é‡æ±¡æŸ“

### 4. æ•°æ®è®¿é—®æ¨¡å¼
```javascript
// âœ… æ¨è: ä½¿ç”¨è§†å›¾è·å–æ•°æ®
async function loadSKUs() {
  const { data, error } = await supabase
    .from('v_skus')
    .select('*')
    .order('created_at', { ascending: false });
  
  if (error) {
    console.error('åŠ è½½ SKU å¤±è´¥:', error);
    return;
  }
  
  return data;
}

// âœ… æ¨è: æ›´æ–°ä½¿ç”¨åŸºç¡€è¡¨
async function updateSKU(id, updates) {
  const { error } = await supabase
    .from('skus')
    .update(updates)
    .eq('id', id);
  
  if (error) {
    console.error('æ›´æ–° SKU å¤±è´¥:', error);
    return false;
  }
  
  return true;
}
```

### 5. é”™è¯¯å¤„ç†
- âœ… å§‹ç»ˆæ£€æŸ¥ Supabase è¿”å›çš„ `error`
- âœ… ä½¿ç”¨ä¸­æ–‡é”™è¯¯æ¶ˆæ¯æç¤ºç”¨æˆ·
- âœ… åœ¨æ§åˆ¶å°è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯
- âœ… ä¼˜é›…é™çº§,é¿å…åº”ç”¨å´©æºƒ

---

## ğŸ¨ UI/UX è§„èŒƒ

### 1. Material Design 3 ç»„ä»¶
- ä½¿ç”¨ M3 ç»„ä»¶: `md-filled-button`, `md-outlined-text-field` ç­‰
- éµå¾ª M3 é¢œè‰²ç³»ç»Ÿå’Œæ’ç‰ˆè§„èŒƒ
- ä¿æŒè®¾è®¡ä¸€è‡´æ€§

### 2. å“åº”å¼è®¾è®¡
- ä¼˜å…ˆè€ƒè™‘æ¡Œé¢ç«¯ä½“éªŒ
- ç¡®ä¿ç§»åŠ¨ç«¯å¯ç”¨æ€§
- ä½¿ç”¨ CSS Grid å’Œ Flexbox å¸ƒå±€

### 3. ç”¨æˆ·åé¦ˆ
- åŠ è½½çŠ¶æ€: æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
- æˆåŠŸæ“ä½œ: æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
- é”™è¯¯å¤„ç†: æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
- ç¡®è®¤æ“ä½œ: é‡è¦æ“ä½œéœ€è¦ç¡®è®¤å¯¹è¯æ¡†

---

## ğŸ“ ä»£ç é£æ ¼è§„èŒƒ

### 1. JavaScript
- **å‘½å**: `camelCase` ç”¨äºå˜é‡å’Œå‡½æ•°
- **å¸¸é‡**: `UPPER_SNAKE_CASE` ç”¨äºå¸¸é‡
- **ç±»å**: `PascalCase` ç”¨äºç±»
- **æ³¨é‡Š**: ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š
- **å¼‚æ­¥**: ä¼˜å…ˆä½¿ç”¨ `async/await` è€Œé Promise é“¾

```javascript
// âœ… æ¨è
const skuList = [];
const MAX_ITEMS = 100;

async function fetchData() {
  // è·å–æ•°æ®
  const result = await supabase.from('v_skus').select('*');
  return result;
}

// âŒ é¿å…
const SKUList = [];  // å˜é‡ä¸åº”ä½¿ç”¨ PascalCase
function fetch_data() {}  // å‡½æ•°ä¸åº”ä½¿ç”¨ snake_case
```

### 2. CSS
- **å‘½å**: `kebab-case` ç”¨äº class å
- **ç»„ç»‡**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡æ ·å¼
- **æ³¨é‡Š**: ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šè¯´æ˜å¤æ‚æ ·å¼

### 3. HTML
- **è¯­ä¹‰åŒ–**: ä½¿ç”¨è¯­ä¹‰åŒ– HTML5 æ ‡ç­¾
- **å¯è®¿é—®æ€§**: æ·»åŠ é€‚å½“çš„ ARIA å±æ€§
- **ID å‘½å**: `kebab-case` ç”¨äºå…ƒç´  ID

---

## ğŸ”§ Git æäº¤è§„èŒƒ

### 1. Commit æ¶ˆæ¯æ ¼å¼
- **è¯­è¨€**: å¿…é¡»ä½¿ç”¨ä¸­æ–‡
- **æ ¼å¼**: `<ç±»å‹>: <ç®€çŸ­æè¿°>`
- **è¯¦ç»†è¯´æ˜**: å¯é€‰,åœ¨ç©ºè¡Œåæ·»åŠ 

### 2. Commit ç±»å‹
- `æ–°å¢` - æ–°åŠŸèƒ½
- `ä¿®å¤` - Bug ä¿®å¤
- `ä¼˜åŒ–` - æ€§èƒ½ä¼˜åŒ–æˆ–ä»£ç æ”¹è¿›
- `é‡æ„` - ä»£ç é‡æ„
- `æ–‡æ¡£` - æ–‡æ¡£æ›´æ–°
- `æ ·å¼` - ä»£ç æ ¼å¼è°ƒæ•´(ä¸å½±å“åŠŸèƒ½)
- `é…ç½®` - é…ç½®æ–‡ä»¶ä¿®æ”¹

### 3. ç¤ºä¾‹
```bash
# âœ… æ¨è
git commit -m "æ–°å¢: SKU ç®¡ç†é¡µé¢çš„æ‰¹é‡å¯¼å…¥åŠŸèƒ½"
git commit -m "ä¿®å¤: è´¹ç”¨ç®¡ç†é¡µé¢å›¾ç‰‡ä¸Šä¼ å¤±è´¥çš„é—®é¢˜"
git commit -m "ä¼˜åŒ–: ä½¿ç”¨è§†å›¾æ›¿ä»£ JOIN æŸ¥è¯¢æå‡æ€§èƒ½"

# âŒ é¿å…
git commit -m "update"
git commit -m "fix bug"
git commit -m "Add new feature"  # åº”ä½¿ç”¨ä¸­æ–‡
```

---

## ğŸ”’ å®‰å…¨è§„èŒƒ

### 1. è®¤è¯
- âœ… ä½¿ç”¨ Google OAuth è®¤è¯
- âœ… é™åˆ¶ç‰¹å®šé‚®ç®±è®¿é—® (lenson.sz@gmail.com)
- âœ… æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
- âš ï¸ æœªæ¥è€ƒè™‘å¯ç”¨ RLS (Row Level Security)

### 2. æ•æ„Ÿä¿¡æ¯
- âŒ ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API å¯†é’¥
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶
- âœ… ä¸æäº¤æ•æ„Ÿä¿¡æ¯åˆ° Git

### 3. æ•°æ®éªŒè¯
- âœ… å‰ç«¯éªŒè¯ç”¨æˆ·è¾“å…¥
- âœ… åç«¯(æ•°æ®åº“)è®¾ç½®çº¦æŸ
- âœ… é˜²æ­¢ SQL æ³¨å…¥(ä½¿ç”¨ Supabase å‚æ•°åŒ–æŸ¥è¯¢)

---

## ğŸ“¦ éƒ¨ç½²è§„èŒƒ

### 1. GitHub Pages
- **åˆ†æ”¯**: éƒ¨ç½²åˆ° `main` æˆ– `gh-pages` åˆ†æ”¯
- **è·¯å¾„**: ç¡®ä¿æ‰€æœ‰èµ„æºä½¿ç”¨ç›¸å¯¹è·¯å¾„
- **HTTPS**: å¼ºåˆ¶ä½¿ç”¨ HTTPS

### 2. ç¯å¢ƒé…ç½®
- **å¼€å‘ç¯å¢ƒ**: æœ¬åœ°æµ‹è¯•
- **ç”Ÿäº§ç¯å¢ƒ**: GitHub Pages
- **æ•°æ®åº“**: Supabase (ç”Ÿäº§ç¯å¢ƒ)

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### 1. æ‰‹åŠ¨æµ‹è¯•
- âœ… æ¯æ¬¡åŠŸèƒ½å¼€å‘åè¿›è¡Œæ‰‹åŠ¨æµ‹è¯•
- âœ… æµ‹è¯•æ‰€æœ‰ç”¨æˆ·äº¤äº’æµç¨‹
- âœ… éªŒè¯æ•°æ®æ­£ç¡®æ€§

### 2. æµè§ˆå™¨å…¼å®¹æ€§
- âœ… Chrome (ä¸»è¦)
- âœ… Safari
- âœ… Firefox
- âš ï¸ Edge (æ¬¡è¦)

---

## ğŸ“š æ–‡æ¡£è§„èŒƒ

### 1. ä»£ç æ³¨é‡Š
- **è¯­è¨€**: ä½¿ç”¨ä¸­æ–‡
- **ä½ç½®**: å¤æ‚é€»è¾‘ã€ä¸šåŠ¡è§„åˆ™ã€é‡è¦å†³ç­–
- **æ ¼å¼**: ç®€æ´æ˜äº†,é¿å…å†—ä½™

### 2. é¡¹ç›®æ–‡æ¡£
- `README.md` - é¡¹ç›®æ¦‚è¿°å’Œå¿«é€Ÿå¼€å§‹
- `database_schema.md` - æ•°æ®åº“æ¶æ„æ–‡æ¡£
- `.gemini/rules.md` - æœ¬å¼€å‘è§„èŒƒæ–‡æ¡£

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ€§èƒ½ä¼˜åŒ–
- âœ… ä½¿ç”¨è§†å›¾å‡å°‘å®¢æˆ·ç«¯ JOIN æ“ä½œ
- âœ… åˆç†ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
- âœ… é¿å… N+1 æŸ¥è¯¢é—®é¢˜
- âœ… å›¾ç‰‡ä½¿ç”¨ Supabase Storage

### 2. ç”¨æˆ·ä½“éªŒ
- âœ… å¿«é€Ÿå“åº”ç”¨æˆ·æ“ä½œ
- âœ… æä¾›æ¸…æ™°çš„çŠ¶æ€åé¦ˆ
- âœ… ä¼˜é›…çš„é”™è¯¯å¤„ç†
- âœ… ä¿æŒç•Œé¢ä¸€è‡´æ€§

### 3. ä»£ç è´¨é‡
- âœ… ä¿æŒå‡½æ•°ç®€çŸ­,å•ä¸€èŒè´£
- âœ… é¿å…é‡å¤ä»£ç ,æå–å…¬å…±é€»è¾‘
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å
- âœ… å®šæœŸé‡æ„,ä¿æŒä»£ç æ•´æ´

---

## ğŸš€ å¼€å‘å·¥ä½œæµ

1. **å¼€å§‹æ–°åŠŸèƒ½**
   - åˆ›å»ºåŠŸèƒ½åˆ†æ”¯(å¯é€‰)
   - æ›´æ–° `task.md` æ·»åŠ å¾…åŠäº‹é¡¹

2. **å¼€å‘è¿‡ç¨‹**
   - éµå¾ªæœ¬è§„èŒƒæ–‡æ¡£
   - å‚è€ƒ `database_schema.md`
   - ç¼–å†™æ¸…æ™°çš„ä¸­æ–‡æ³¨é‡Š

3. **å®ŒæˆåŠŸèƒ½**
   - æ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   - ä½¿ç”¨ä¸­æ–‡æäº¤ Git commit
   - æ¨é€åˆ° GitHub
   - éªŒè¯ GitHub Pages éƒ¨ç½²

4. **ç»´æŠ¤**
   - æ•°æ®åº“å˜æ›´åæ›´æ–° `database_schema.md`
   - é‡å¤§å˜æ›´æ›´æ–° `README.md`
   - ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥

---

## ğŸ“ è”ç³»ä¸æ”¯æŒ

å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦ååŠ©,è¯·å‚è€ƒ:
- ğŸ“„ æ•°æ®åº“æ¶æ„: `database_schema.md`
- ğŸ“ é¡¹ç›®æ–‡æ¡£: `README.md`
- ğŸ¤– AI åŠ©æ‰‹: éšæ—¶è¯¢é—®å¼€å‘é—®é¢˜

---

**æœ€åæ›´æ–°**: 2025-11-21
